<section class="extended-reading">
  <h2>Extended Reading</h2>

  <p class="reading-intro">{{ bundle.intro }}</p>

  {% for group in bundle.groups %}
  <div class="reading-group">
    <h3>{{ group.title }}</h3>
    {% if group.description %}
    <p class="group-description">{{ group.description }}</p>
    {% endif %}
    <ul class="source-list">
      {% for sourceRef in group.sources %}
      {% set source = sources | getSourceById(sourceRef.id) %}
      <li class="source-item">
        {% if source %}
        <strong>
          {% if source.author %}{{ source.author }} — {% endif %}
          {% if source.publisher and not source.author %}{{ source.publisher }} — {% endif %}
          {% if source.url %}
            <a href="{{ source.url }}">{{ source.title }}</a>
          {% else %}
            {{ source.title }}
          {% endif %}
        </strong>
        {% else %}
        <strong>{{ sourceRef.id }}</strong>
        {% endif %}
        {% if sourceRef.description %}
        <p>{{ sourceRef.description }}</p>
        {% endif %}
      </li>
      {% endfor %}
    </ul>
  </div>
  {% endfor %}
</section>
