---
layout: layouts/base.njk
title: Source Summaries
---

<h1>Source Summaries</h1>
<p class="summary-intro">Human-readable summaries of every source, enriched with topics and tags so the agentic feed stays navigable.</p>

<div class="search-field">
  <label for="summary-search">Search summaries, topics, or tags</label>
  <input id="summary-search" type="search" placeholder="Search by keyword, topic, or category" data-summary-search>
</div>

<div class="summary-grid" data-summary-grid>
  {%- for summary in source_summaries %}
    {%- set source = sources | getSourceById(summary.source_id) %}
    <article class="summary-card" data-summary-card data-search="{{ [source.title, summary.summary, summary.long_summary, summary.tags | join(' '), summary.topics | join(' '), summary.categories | join(' ')] | join(' ') | lower }}">
      <h3>{{ source.title }}</h3>
      <p>{{ summary.summary }}</p>
      <div class="summary-meta">
        {%- for tag in summary.tags %}
          <span class="tag-pill">{{ tag }}</span>
        {%- endfor %}
        {%- for topic in summary.topics %}
          <span class="tag-pill">{{ topic }}</span>
        {%- endfor %}
        {%- for category in summary.categories %}
          <span class="tag-pill">{{ category }}</span>
        {%- endfor %}
      </div>
      <div class="summary-links">
        <a href="{{ ('/summaries/' ~ summary.source_id ~ '/') | url }}">Read summary</a>
        {%- if source.url %}
          <a href="{{ source.url }}">Original source</a>
        {%- endif %}
      </div>
    </article>
  {%- endfor %}
</div>

<p class="search-empty" data-summary-empty hidden>No summaries match this search.</p>

<script>
  (function () {
    const input = document.querySelector('[data-summary-search]');
    const cards = Array.from(document.querySelectorAll('[data-summary-card]'));
    const emptyState = document.querySelector('[data-summary-empty]');

    if (!input) return;

    const update = () => {
      const term = input.value.trim().toLowerCase();
      let visible = 0;
      cards.forEach((card) => {
        const haystack = card.dataset.search || '';
        const match = !term || haystack.includes(term);
        card.hidden = !match;
        if (match) visible += 1;
      });
      if (emptyState) emptyState.hidden = visible !== 0;
    };

    input.addEventListener('input', update);
  })();
</script>
