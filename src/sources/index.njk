---
layout: layouts/base.njk
title: Sources
---

<h1>Sources</h1>
<p class="summary-intro">A complete, searchable index of every source, with summaries, topics, and tags when available.</p>

<div class="search-field">
  <label for="sources-search">Search sources, summaries, or tags</label>
  <input id="sources-search" type="search" placeholder="Search by title, author, topic, or tag" data-sources-search>
</div>

<div class="summary-grid" data-sources-grid>
  {%- for source in sources %}
    {%- set summary = source_summaries | getSourceSummaryById(source.id) %}
    {%- set sourcePeople = people | getPeopleBySourceId(source.id) %}
    <article class="summary-card" data-sources-card data-search="{{ [source.title, source.author, source.publisher, source.repository, summary.summary, summary.long_summary, summary.tags | join(' '), summary.topics | join(' '), summary.categories | join(' ')] | join(' ') | lower }}">
      <h3>{{ source.title }}</h3>
      {%- if summary %}
        <p>{{ summary.summary }}</p>
      {%- endif %}
      {%- if sourcePeople.length %}
        <div class="summary-meta">
          <span class="meta-label">People:</span>
          <ul class="meta-list">
            {%- for person in sourcePeople %}
              <li><a href="{{ ('/people/' ~ person.id ~ '/') | url }}">{{ person.name }}</a></li>
            {%- endfor %}
          </ul>
        </div>
      {%- endif %}
      <div class="summary-meta">
        {%- if summary %}
          {%- for tag in summary.tags %}
            <a class="tag-pill" href="{{ ('/topics/tag/' ~ (tag | slugifyTerm) ~ '/') | url }}">{{ tag }}</a>
          {%- endfor %}
          {%- for topic in summary.topics %}
            <a class="tag-pill" href="{{ ('/topics/topic/' ~ (topic | slugifyTerm) ~ '/') | url }}">{{ topic }}</a>
          {%- endfor %}
          {%- for category in summary.categories %}
            <a class="tag-pill" href="{{ ('/topics/category/' ~ (category | slugifyTerm) ~ '/') | url }}">{{ category }}</a>
          {%- endfor %}
        {%- endif %}
      </div>
      <div class="summary-links">
        {%- if summary %}
          <a href="{{ ('/summaries/' ~ source.id ~ '/') | url }}">Read summary</a>
        {%- endif %}
        {%- if source.url %}
          <a href="{{ source.url }}">Original source</a>
        {%- endif %}
      </div>
    </article>
  {%- endfor %}
</div>

<p class="search-empty" data-sources-empty hidden>No sources match this search.</p>

<script>
  (function () {
    const input = document.querySelector('[data-sources-search]');
    const cards = Array.from(document.querySelectorAll('[data-sources-card]'));
    const emptyState = document.querySelector('[data-sources-empty]');

    if (!input) return;

    const update = () => {
      const term = input.value.trim().toLowerCase();
      let visible = 0;
      cards.forEach((card) => {
        const haystack = card.dataset.search || '';
        const match = !term || haystack.includes(term);
        card.hidden = !match;
        if (match) visible += 1;
      });
      if (emptyState) emptyState.hidden = visible !== 0;
    };

    input.addEventListener('input', update);
  })();
</script>
